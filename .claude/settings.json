{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json\ntry:\n    d = json.load(sys.stdin)\n    cmd = d.get('command', '')\n    git_ops = any(x in cmd for x in ['git add', 'git commit', 'git push'])\n    has_env = '.env' in cmd and '.env.' not in cmd\n    if git_ops and has_env:\n        print('SAFETY BLOCK: .env must never be staged or committed.')\n        print('Use explicit file paths: git add lib/... spec/...')\n        sys.exit(1)\nexcept Exception:\n    pass\n\""
          }
        ]
      }
    ]
  }
}
